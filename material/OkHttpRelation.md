# Android 端 HttpURLConnection 与 OkHttp 关系

小米 MIX 3，Android 10

```
com.lemon.http.HttpException: Execute request exception to https://api.btstu.cn/tst/api.php: Unable to resolve host "api.btstu.cn": No address associated with hostname
        at com.lemon.http.HttpException$Companion.create(HttpException.kt:16)
        at com.lemon.http.client.LemonClient.call(LemonClient.kt:105)
        at com.lemon.http.client.LemonClient.execute(LemonClient.kt:37)
        at com.lemon.http.interceptor.RealCallInterceptor.intercept(RealCallInterceptor.kt:12)
        at com.lemon.http.interceptor.ApplyChain.proceed(ApplyChain.kt:33)
        at com.lemon.http.log.LemonLogInterceptor.intercept(LemonLogInterceptor.kt:33)
        at com.lemon.http.interceptor.ApplyChain.proceed(ApplyChain.kt:33)
        at com.lemon.http.net.Net$lemon$1$2.intercept(Net.kt:53)
        at com.lemon.http.interceptor.ApplyChain.proceed(ApplyChain.kt:33)
        at com.lemon.http.net.Net$lemon$1$1.intercept(Net.kt:40)
        at com.lemon.http.interceptor.ApplyChain.proceed(ApplyChain.kt:33)
        at com.lemon.http.interceptor.ApplyChain$Companion.proceed(ApplyChain.kt:22)
        at com.lemon.http.apimethod.ApiMethod.proceed(ApiMethod.kt:35)
        at com.lemon.http.apimethod.ApiMethod.access$proceed(ApiMethod.kt:15)
        at com.lemon.http.apimethod.ApiMethod$invoke$1.invoke(ApiMethod.kt:25)
        at com.lemon.http.adapter.ApiAdapterFinder$DefaultApiAdapter.adapt(ApiAdapterFinder.kt:59)
        at com.lemon.http.apimethod.ApiMethod.invoke(ApiMethod.kt:25)
        at com.lemon.http.Lemon$create$1.invoke(Lemon.kt:56)
        at java.lang.reflect.Proxy.invoke(Proxy.java:1006)
        at $Proxy2.languageTranslation(Unknown Source)
        at com.lemon.http.use.viewmodel.model.TstViewModel$languageTranslation$1.invoke(TstViewModel.kt:22)
        at com.lemon.http.use.viewmodel.model.TstViewModel$languageTranslation$1.invoke(TstViewModel.kt:19)
        at com.lemon.http.use.viewmodel.model.BaseViewModel$request$1$1.invokeSuspend(BaseViewModel.kt:24)
        at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)
        at kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)
        at kotlinx.coroutines.scheduling.CoroutineScheduler.runSafely(CoroutineScheduler.kt:571)
        at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.executeTask(CoroutineScheduler.kt:750)
        at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.runWorker(CoroutineScheduler.kt:678)
        at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.run(CoroutineScheduler.kt:665)
     Caused by: java.net.UnknownHostException: Unable to resolve host "api.btstu.cn": No address associated with hostname
        at java.net.Inet6AddressImpl.lookupHostByName(Inet6AddressImpl.java:156)
        at java.net.Inet6AddressImpl.lookupAllHostAddr(Inet6AddressImpl.java:103)
        at java.net.InetAddress.getAllByName(InetAddress.java:1152)
        at com.android.okhttp.Dns$1.lookup(Dns.java:41)
        at com.android.okhttp.internal.http.RouteSelector.resetNextInetSocketAddress(RouteSelector.java:178)
        at com.android.okhttp.internal.http.RouteSelector.nextProxy(RouteSelector.java:144)
        at com.android.okhttp.internal.http.RouteSelector.next(RouteSelector.java:86)
        at com.android.okhttp.internal.http.StreamAllocation.findConnection(StreamAllocation.java:176)
        at com.android.okhttp.internal.http.StreamAllocation.findHealthyConnection(StreamAllocation.java:128)
        at com.android.okhttp.internal.http.StreamAllocation.newStream(StreamAllocation.java:97)
        at com.android.okhttp.internal.http.HttpEngine.connect(HttpEngine.java:289)
        at com.android.okhttp.internal.http.HttpEngine.sendRequest(HttpEngine.java:232)
        at com.android.okhttp.internal.huc.HttpURLConnectionImpl.execute(HttpURLConnectionImpl.java:465)
        at com.android.okhttp.internal.huc.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:131)
        at com.android.okhttp.internal.huc.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:262)
        at com.android.okhttp.internal.huc.DelegatingHttpsURLConnection.getOutputStream(DelegatingHttpsURLConnection.java:219)
        at com.android.okhttp.internal.huc.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:30)
2022-05-24 14:35:48.978 6999-6999/com.lemon.http E/Demo:     at com.lemon.http.client.LemonClient.call(LemonClient.kt:73)
        	... 27 more
     Caused by: android.system.GaiException: android_getaddrinfo failed: EAI_NODATA (No address associated with hostname)
        at libcore.io.Linux.android_getaddrinfo(Native Method)
        at libcore.io.ForwardingOs.android_getaddrinfo(ForwardingOs.java:74)
        at libcore.io.BlockGuardOs.android_getaddrinfo(BlockGuardOs.java:200)
        at libcore.io.ForwardingOs.android_getaddrinfo(ForwardingOs.java:74)
        at java.net.Inet6AddressImpl.lookupHostByName(Inet6AddressImpl.java:135)
        	... 44 more
```

OPPO R17 Android 10

```
com.lemon.http.HttpException: Execute request exception to https://api.btstu.cn/tst/api.php: Unable to resolve host "api.btstu.cn": No address associated with hostname
        at com.lemon.http.HttpException$Companion.create(HttpException.kt:16)
        at com.lemon.http.client.LemonClient.call(LemonClient.kt:105)
        at com.lemon.http.client.LemonClient.execute(LemonClient.kt:37)
        at com.lemon.http.interceptor.RealCallInterceptor.intercept(RealCallInterceptor.kt:12)
        at com.lemon.http.interceptor.ApplyChain.proceed(ApplyChain.kt:33)
        at com.lemon.http.log.LemonLogInterceptor.intercept(LemonLogInterceptor.kt:33)
        at com.lemon.http.interceptor.ApplyChain.proceed(ApplyChain.kt:33)
        at com.lemon.http.net.Net$lemon$1$2.intercept(Net.kt:53)
        at com.lemon.http.interceptor.ApplyChain.proceed(ApplyChain.kt:33)
        at com.lemon.http.net.Net$lemon$1$1.intercept(Net.kt:40)
        at com.lemon.http.interceptor.ApplyChain.proceed(ApplyChain.kt:33)
        at com.lemon.http.interceptor.ApplyChain$Companion.proceed(ApplyChain.kt:22)
        at com.lemon.http.apimethod.ApiMethod.proceed(ApiMethod.kt:35)
        at com.lemon.http.apimethod.ApiMethod.access$proceed(ApiMethod.kt:15)
        at com.lemon.http.apimethod.ApiMethod$invoke$1.invoke(ApiMethod.kt:25)
        at com.lemon.http.adapter.ApiAdapterFinder$DefaultApiAdapter.adapt(ApiAdapterFinder.kt:59)
        at com.lemon.http.apimethod.ApiMethod.invoke(ApiMethod.kt:25)
        at com.lemon.http.Lemon$create$1.invoke(Lemon.kt:56)
        at java.lang.reflect.Proxy.invoke(Proxy.java:1006)
        at $Proxy2.languageTranslation(Unknown Source)
        at com.lemon.http.use.viewmodel.model.TstViewModel$languageTranslation$1.invoke(TstViewModel.kt:22)
        at com.lemon.http.use.viewmodel.model.TstViewModel$languageTranslation$1.invoke(TstViewModel.kt:19)
        at com.lemon.http.use.viewmodel.model.BaseViewModel$request$1$1.invokeSuspend(BaseViewModel.kt:24)
        at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)
        at kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)
        at kotlinx.coroutines.scheduling.CoroutineScheduler.runSafely(CoroutineScheduler.kt:571)
        at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.executeTask(CoroutineScheduler.kt:750)
        at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.runWorker(CoroutineScheduler.kt:678)
        at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.run(CoroutineScheduler.kt:665)
     Caused by: java.net.UnknownHostException: Unable to resolve host "api.btstu.cn": No address associated with hostname
        at java.net.Inet6AddressImpl.lookupHostByName(Inet6AddressImpl.java:156)
        at java.net.Inet6AddressImpl.lookupAllHostAddr(Inet6AddressImpl.java:103)
        at java.net.InetAddress.getAllByName(InetAddress.java:1152)
        at com.android.okhttp.Dns$1.lookup(Dns.java:41)
        at com.android.okhttp.internal.http.RouteSelector.resetNextInetSocketAddress(RouteSelector.java:178)
        at com.android.okhttp.internal.http.RouteSelector.nextProxy(RouteSelector.java:144)
        at com.android.okhttp.internal.http.RouteSelector.next(RouteSelector.java:86)
        at com.android.okhttp.internal.http.StreamAllocation.findConnection(StreamAllocation.java:176)
        at com.android.okhttp.internal.http.StreamAllocation.findHealthyConnection(StreamAllocation.java:128)
        at com.android.okhttp.internal.http.StreamAllocation.newStream(StreamAllocation.java:97)
        at com.android.okhttp.internal.http.HttpEngine.connect(HttpEngine.java:289)
        at com.android.okhttp.internal.http.HttpEngine.sendRequest(HttpEngine.java:232)
        at com.android.okhttp.internal.huc.HttpURLConnectionImpl.execute(HttpURLConnectionImpl.java:465)
        at com.android.okhttp.internal.huc.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:131)
        at com.android.okhttp.internal.huc.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:262)
        at com.android.okhttp.internal.huc.DelegatingHttpsURLConnection.getOutputStream(DelegatingHttpsURLConnection.java:219)
        at com.android.okhttp.internal.huc.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:30)
2022-05-24 14:47:14.256 23355-23355/com.lemon.http E/Demo:     at com.lemon.http.client.LemonClient.call(LemonClient.kt:73)
        	... 27 more
     Caused by: android.system.GaiException: android_getaddrinfo failed: EAI_NODATA (No address associated with hostname)
        at libcore.io.Linux.android_getaddrinfo(Native Method)
        at libcore.io.ForwardingOs.android_getaddrinfo(ForwardingOs.java:74)
        at libcore.io.BlockGuardOs.android_getaddrinfo(BlockGuardOs.java:200)
        at libcore.io.ForwardingOs.android_getaddrinfo(ForwardingOs.java:74)
        at java.net.Inet6AddressImpl.lookupHostByName(Inet6AddressImpl.java:135)
        	... 44 more

```