## 原理
整体原理参考 Retrofit 和 OkHttp。

通常我们说的接口是服务端和使用端双方约定好的抽象数据结构，同时约定好请求方式，抽象的数据结构正好可以使用语言中 Interface (即接口) 和 Annotation (注解) 来表达，按照约定数据字段来定义方法函数，用注解进一步表达关联关系及请求方式等。定义好抽象数据结构后下一步就会用到语言特性中动态代理 (Proxy.newProxyInstance(……)) 生成代理实例，发起实际调用时对定义好的接口及方法函数进行解析，按照一定规则解析出统一的请求结构信息(例如：请求 Path、请求参数类型、请求方式、返回数据类型)。再将实际参数与请求结构信息生成最终的请求实例，再执行拦截器对请求实例加工，再根据指定的请求客户端 (默认使用 HttpURLConnection) 发起实际请求，再读取出请求响应结果，根据解析的返回类型转换后返回。

不想看上面这段口水话，直接往下看。

#### 原理流程总结

1. 定义约定的抽象数据结构 (Interface 接口和 Annotation 注解)
2. 创建动态代理 Proxy.newProxyInstance(……) 实例
3. 发起实际调用，解析 Interface 实例得到请求结构信息
4. 用实际参数与请求结果信息生成最终请求实例
5. 执行拦截器对请求实例加工
6. 使用请求客户端发起实际请求得到响应结果
7. 根据解析的返回类型转换后返回

#### 原理流程图

![](./img/Lemon流程图.png)

整体的核心是解析接口及函数注解类型等信息，并根据实际参数生成请求实例(Request)发起请求，然后再讲请求响应结果根据返回类型转换成实际类型返回。


## 高级说明
